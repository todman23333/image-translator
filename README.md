# å›¾ç‰‡ç¿»è¯‘å·¥å…·

ä¸€ä¸ªåŸºäºWebçš„å›¾ç‰‡ç¿»è¯‘åº”ç”¨ï¼Œæ”¯æŒä¸Šä¼ å›¾ç‰‡åè‡ªåŠ¨è¯†åˆ«æ–‡å­—ã€ç¿»è¯‘å¹¶é‡æ–°æ¸²æŸ“åˆ°åŸå›¾ä¸Šã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ–¼ï¸ **å›¾ç‰‡ä¸Šä¼ **ï¼šæ”¯æŒæ‹–æ‹½å’Œç‚¹å‡»ä¸Šä¼ ï¼Œæ”¯æŒ JPGã€PNGã€WebP æ ¼å¼
- ğŸ” **OCRè¯†åˆ«**ï¼šä½¿ç”¨ PaddleOCRï¼Œå…è´¹æœ¬åœ°è¿è¡Œï¼Œæ”¯æŒ80+è¯­è¨€
- ğŸŒ **å¤šè¯­è¨€ç¿»è¯‘**ï¼šæ”¯æŒ10ç§ä¸»æµè¯­è¨€äº’è¯‘
- âœ¨ **æ™ºèƒ½é‡ç»˜**ï¼šä¿æŒåŸå›¾é£æ ¼ï¼Œè‡ªåŠ¨åŒ¹é…å­—ä½“ã€é¢œè‰²ã€å¯¹é½æ–¹å¼
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯è®¿é—®

## æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**ï¼šFastAPI (Python)
- **OCR**ï¼šPaddleOCRï¼ˆå…è´¹å¼€æºï¼Œæ— éœ€API Keyï¼‰
- **ç¿»è¯‘**ï¼šGoogle Translate API
- **å›¾åƒå¤„ç†**ï¼šPillow + OpenCV

### å‰ç«¯
- **æ¡†æ¶**ï¼šReact 18 + TypeScript
- **UIåº“**ï¼šAnt Design
- **çŠ¶æ€ç®¡ç†**ï¼šZustand
- **æ„å»ºå·¥å…·**ï¼šVite

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Docker
- Docker Compose

### å¯åŠ¨æœåŠ¡

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd image-translator

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨ï¼ˆé¦–æ¬¡å¯åŠ¨éœ€è¦ä¸‹è½½æ¨¡å‹ï¼Œå¤§çº¦éœ€è¦3-5åˆ†é’Ÿï¼‰
```

### è®¿é—®åº”ç”¨

- **å‰ç«¯ç•Œé¢**ï¼šhttp://localhost:3000
- **åç«¯API**ï¼šhttp://localhost:8000
- **APIæ–‡æ¡£**ï¼šhttp://localhost:8000/docs

## ä½¿ç”¨è¯´æ˜

1. æ‰“å¼€ http://localhost:3000
2. é€‰æ‹©æºè¯­è¨€ï¼ˆå¯é€‰ï¼‰å’Œç›®æ ‡è¯­è¨€
3. ä¸Šä¼ å›¾ç‰‡æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°ä¸Šä¼ åŒºåŸŸ
4. ç­‰å¾…å¤„ç†å®Œæˆï¼ˆé€šå¸¸10-30ç§’ï¼‰
5. é¢„è§ˆç¿»è¯‘ç»“æœå¹¶ä¸‹è½½

## APIæ¥å£

### ä¸Šä¼ å›¾ç‰‡å¹¶ç¿»è¯‘
```bash
curl -X POST "http://localhost:8000/api/v1/translate" \
  -F "image=@example.jpg" \
  -F "target_language=zh"
```

### æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
```bash
curl "http://localhost:8000/api/v1/tasks/{task_id}"
```

### è·å–æ”¯æŒçš„è¯­è¨€
```bash
curl "http://localhost:8000/api/v1/languages"
```

## é¡¹ç›®ç»“æ„

```
image-translator/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±å’Œæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ocr_service.py         # OCRè¯†åˆ«
â”‚   â”‚   â”‚   â”œâ”€â”€ translation_service.py # ç¿»è¯‘æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ image_service.py       # å›¾åƒå¤„ç†
â”‚   â”‚   â””â”€â”€ main.py         # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/         # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ types/         # TypeScriptç±»å‹
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ uploads/               # ä¸Šä¼ å›¾ç‰‡å­˜å‚¨
â”œâ”€â”€ outputs/               # ç¿»è¯‘ç»“æœå­˜å‚¨
â””â”€â”€ docker-compose.yml
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

å¯ä»¥åœ¨ `docker-compose.yml` ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- `UPLOAD_DIR`: ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ç›®å½•ï¼ˆé»˜è®¤ï¼š/app/uploadsï¼‰
- `OUTPUT_DIR`: è¾“å‡ºæ–‡ä»¶å­˜å‚¨ç›®å½•ï¼ˆé»˜è®¤ï¼š/app/outputsï¼‰
- `FONT_DIR`: å­—ä½“æ–‡ä»¶ç›®å½•ï¼ˆé»˜è®¤ï¼š/app/fontsï¼‰

### å­—ä½“é…ç½®

åº”ç”¨æ”¯æŒä»¥ä¸‹å­—ä½“ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š
1. SourceHanSansCNï¼ˆæ€æºé»‘ä½“ï¼‰
2. NotoSansCJK
3. å¾®è½¯é›…é»‘
4. Arial
5. DejaVuSans

å°†å­—ä½“æ–‡ä»¶æ”¾å…¥ `fonts/` ç›®å½•å³å¯è‡ªåŠ¨åŠ è½½ã€‚

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘ï¼ˆä¸ä½¿ç”¨Dockerï¼‰

#### åç«¯å¼€å‘
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### å‰ç«¯å¼€å‘
```bash
cd frontend
npm install
npm run dev
```

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ·»åŠ æ–°è¯­è¨€æ”¯æŒ**
   - åœ¨ `backend/app/api/routes.py` çš„ `get_languages` ä¸­æ·»åŠ è¯­è¨€
   - åœ¨ `backend/app/api/models.py` çš„ `LanguageCode` æšä¸¾ä¸­æ·»åŠ 

2. **æ›´æ¢ç¿»è¯‘å¼•æ“**
   - ä¿®æ”¹ `backend/app/services/translation_service.py`
   - å®ç° `translate` æ–¹æ³•å³å¯

3. **ä¼˜åŒ–å›¾åƒå¤„ç†**
   - ä¿®æ”¹ `backend/app/services/image_service.py`
   - è°ƒæ•´ `_draw_text_in_region` æ–¹æ³•

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆOCRè¯†åˆ«ä¸å‡†ç¡®ï¼Ÿ
A: PaddleOCRåœ¨æ¸…æ™°å›¾ç‰‡ä¸Šçš„å‡†ç¡®ç‡å¾ˆé«˜ã€‚å¦‚æœè¯†åˆ«ä¸å‡†ç¡®ï¼Œå¯ä»¥å°è¯•ï¼š
- ä¸Šä¼ æ›´æ¸…æ™°çš„å›¾ç‰‡
- ç¡®ä¿æ–‡å­—ä¸èƒŒæ™¯å¯¹æ¯”åº¦è¶³å¤Ÿ
- é¿å…è¿‡åº¦å‹ç¼©çš„å›¾ç‰‡

### Q: ç¿»è¯‘è´¨é‡å¦‚ä½•ï¼Ÿ
A: ä½¿ç”¨Google Translateå…è´¹APIï¼Œé€‚åˆä¸€èˆ¬ç”¨é€”ã€‚å¦‚éœ€æ›´é«˜è´¨é‡ï¼Œå»ºè®®ï¼š
- æ›´æ¢ä¸ºDeepL API
- ä½¿ç”¨ä»˜è´¹çš„Google Cloud Translation API

### Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ
A: æ”¯æŒ JPGã€JPEGã€PNGã€WebPã€BMP æ ¼å¼ï¼Œæœ€å¤§10MBã€‚

### Q: å¦‚ä½•å¤„ç†å¤±è´¥çš„ä»»åŠ¡ï¼Ÿ
A: ç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•ç¿»è¯‘APIè°ƒç”¨ã€‚å¦‚æœæŒç»­å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š
- ç½‘ç»œè¿æ¥
- å›¾ç‰‡æ ¼å¼æ˜¯å¦æ­£ç¡®
- æœåŠ¡å™¨æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

## æ€§èƒ½ä¼˜åŒ–

- é¦–æ¬¡å¯åŠ¨éœ€è¦ä¸‹è½½OCRæ¨¡å‹ï¼ˆçº¦100MBï¼‰
- å¤§å›¾ç‰‡ï¼ˆ>2MBï¼‰ä¼šè‡ªåŠ¨å¤„ç†ï¼Œä½†è€—æ—¶è¾ƒé•¿
- å»ºè®®ä½¿ç”¨SSDå­˜å‚¨ä»¥åŠ å¿«æ¨¡å‹åŠ è½½é€Ÿåº¦
- ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®Redisç¼“å­˜ä»»åŠ¡çŠ¶æ€

## è®¸å¯è¯

MIT License

## è‡´è°¢

- [PaddleOCR](https://github.com/PaddlePaddle/PaddleOCR) - OCRå¼•æ“
- [FastAPI](https://fastapi.tiangolo.com/) - Webæ¡†æ¶
- [React](https://react.dev/) - å‰ç«¯æ¡†æ¶
- [Ant Design](https://ant.design/) - UIç»„ä»¶åº“
